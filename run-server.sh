#!/bin/bash

# ุชุดุบูู ูุชุฌุฑ ุฅููุชุฑููู

echo "๐ ุจุฏุก ุชุดุบูู ูุชุฌุฑู ุงูุฅููุชุฑููู..."
echo "=================================="

# ุงูุชุญูู ูู ูุฌูุฏ node_modules
if [ ! -d "node_modules" ]; then
  echo "๐ฆ ุชุซุจูุช ุงูููุชุจุงุช..."
  npm install
fi

# ูุชู ุฃู ุนูููุฉ ุนูู ุงููููุฐ 3000
echo "๐งน ุชูุธูู ุงููููุฐ 3000..."
lsof -ti:3000 | xargs kill -9 2>/dev/null || true

# ุงูุงูุชุธุงุฑ ููููุงู
sleep 1

# ุงูุชุญูู ูู .env
if [ ! -f ".env" ]; then
  echo "โ ููู .env ุบูุฑ ููุฌูุฏ!"
  exit 1
fi

# ุจุฏุก ุงูุฎุงุฏู
echo "โ ุจุฏุก ุงูุฎุงุฏู..."
echo "๐ ุงููููุน: http://localhost:3000"
echo "=================================="

node src/server.js
